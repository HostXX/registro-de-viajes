(this["webpackJsonpreact-travel-log"]=this["webpackJsonpreact-travel-log"]||[]).push([[0],{36:function(e,t,a){e.exports=a(49)},41:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=(a(41),a(5)),i=a.n(o),s=a(9),u=a(6),m=a(7),d=(a(43),"https://viajesapi.herokuapp.com/api/logs/post"),p="https://viajesapi.herokuapp.com/api/logs/delete";function g(){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://viajesapi.herokuapp.com/api/logs/all")).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.apikey,delete t.apikey,e.next=4,fetch(d,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",API_KEY:a}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,!n.ok){e.next=10;break}return e.abrupt("return",n);case 10:throw new Error(r.message);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p,{method:"DELETE",body:JSON.stringify({entryId:t}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var v=a(15),y=function(e){var t=e.isLogged,a=e.setIsLogged;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navigation"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(v.b,{to:"/"},"Locations")),r.a.createElement("li",null,r.a.createElement(v.b,{to:"/account/"},"Account")),r.a.createElement("li",null,t?r.a.createElement(v.b,{to:"/",onClick:function(){return a(!1)}}," ","Log out"," "):r.a.createElement(v.b,{to:"/login"}," Log in ")))))},w=a(10),j=a(21),O=a(19),k=a(24),L=function(e){var t=e.coordinates,a=e.onClose,c=Object(n.useState)(!1),l=Object(u.a)(c,2),o=l[0],m=l[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),g=p[0],E=p[1],h=Object(k.a)(),b=h.register,v=h.handleSubmit,y=function(){var e=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.latitude=t.latitude,n.longitude=t.longitude,e.prev=2,m(!0),e.next=6,f(n);case 6:e.sent,E("Added correctly"),setTimeout((function(){E(""),a()}),1e3),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),E(e.t0.message),setTimeout((function(){E(null)}),2e3),m(!1);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:v(y),className:"entry-form"},g?r.a.createElement("h3",{className:"error",style:{color:"#ff0000"}},g):null,r.a.createElement("label",{htmlFor:"apikey"},"Apikey"),r.a.createElement("input",{name:"apikey",required:!0,ref:b,type:"password"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{name:"title",required:!0,ref:b}),r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement("textarea",{name:"comment",rows:2,ref:b}),r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",rows:2,ref:b}),r.a.createElement("label",{htmlFor:"image"},"Image"),r.a.createElement("input",{name:"image",ref:b}),r.a.createElement("label",{htmlFor:"visitedAt"},"Visit Date"),r.a.createElement("input",{name:"visitedAt",type:"date",required:!0,ref:b}),r.a.createElement("button",{disabled:o},o?"Loading...":"Create Entry")))},x=function(e){var t=e.viewport,a=e.showAddMarkerPopUp,c=e.setViewport,l=e.logEntries,o=e.addEntryLocation,i=e.setAddEntryLocation,s=e.getEntries,m=Object(n.useState)({}),d=Object(u.a)(m,2),p=d[0],g=d[1],E=Object(n.useState)(!1),f=Object(u.a)(E,2),h=f[0],b=f[1];return r.a.createElement("div",{style:{color:"red",width:"100vw",height:"80vh "},className:"map-wrapper"},r.a.createElement(O.c,Object.assign({},t,{onDblClick:a,onViewportChange:function(e){return c(e)},mapboxApiAccessToken:"pk.eyJ1IjoiaG9zdHgiLCJhIjoiY2tmN2RhbGFtMDE5czJzbzhlZDJlZGRrbiJ9.Kpei8_GDV2HjxLtq-n-o3A",mapStyle:h?"mapbox://styles/mapbox/streets-v11":"mapbox://styles/mapbox/dark-v10"}),l.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(O.a,{className:"marker",key:e._id,longitude:e.longitude,latitude:e.latitude,offsetLeft:-15,offsetTop:-7}," ",r.a.createElement("div",{onClick:function(){!0!==p[e._id]&&g(Object(j.a)(Object(j.a)({},p),{},Object(w.a)({},e._id,!0)))}}," ",r.a.createElement("svg",{height:15,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#d00",stroke:"none",transform:"translate(50%,-100%)"}},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n                      c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n                      C20.1,15.8,20.2,15.8,20.2,15.7z"}))),r.a.createElement("div",{style:{color:"#ff3333",position:"absolute",cursor:"pointer",transform:"translate(".concat(-7.5,"px,").concat(-15,"px)")}},e.title)),p[e._id]?r.a.createElement(O.b,{latitude:e.latitude,longitude:e.longitude,closeButton:!0,closeOnClick:!1,sortByDepth:!0,onClose:function(){return g(Object(j.a)(Object(j.a)({},p),{},Object(w.a)({},e._id,!1)))},anchor:"top"},r.a.createElement("div",{className:"pop-up"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.comment),r.a.createElement("small",null," ","visited: ",new Date(e.visitedAt).toLocaleDateString()),e.image&&r.a.createElement("img",{width:"200px",height:"200px",src:e.image,alt:e.title}))):null)})),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:"marker",longitude:o.longitude,latitude:o.latitude,offsetLeft:-20,offsetTop:-10}," ",r.a.createElement("svg",{height:20,viewBox:"0 0 24 24",style:{cursor:"pointer",fill:"#ff3",stroke:"none",transform:"translate(50%,-100%)"}},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n    c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n    C20.1,15.8,20.2,15.8,20.2,15.7z"}))),r.a.createElement(O.b,{latitude:o.latitude,longitude:o.longitude,closeButton:!0,closeOnClick:!1,sortByDepth:!0,onClose:function(){return i(null)},anchor:"top"},r.a.createElement("div",{className:"pop-up"},r.a.createElement("h3",null,"Add this new location to your log"),r.a.createElement(L,{coordinates:o,onClose:function(){i(null),s()}})))):null),r.a.createElement("label",{htmlFor:"toggle-map"},"Change to: ".concat(h?"Dark":"Light"))," ",r.a.createElement("input",{onChange:function(){return b(!h)},checked:h,type:"checkbox",name:"toggle-map",id:"toggle-map"}))},S=a(35),N=function(e){var t=e.component,a=e.isLogged,n=e.path,c=Object(S.a)(e,["component","isLogged","path"]);return r.a.createElement("div",null,r.a.createElement(m.b,{path:n,render:function(e){return a?r.a.createElement(t,Object.assign({},c,e,{isLogged:a})):r.a.createElement(m.a,{to:"/login"})}}))},C=function(e){var t=e.entry,a=e.setLogEntries,n=e.logEntries,c=e.setEntryToShow,l=e.setFullScreenImg,o=e.setShowFullScreenImg;return r.a.createElement("div",{className:"card-container"},r.a.createElement("h3",{className:"location-title"},t.title),r.a.createElement("div",{className:"location-image"},t.image?r.a.createElement("img",{onClick:function(){l(t.image),o(!0)},height:"50%",width:"50%",src:t.image,alt:t.title}):r.a.createElement("small",null,"No image")),r.a.createElement("div",{className:"info-container"},r.a.createElement("div",{className:"latirude"},r.a.createElement("em",null,"Latitude:"),t.latitude),r.a.createElement("div",{className:"longitude"},r.a.createElement("em",null,"Longitude:"),t.longitude),r.a.createElement("div",{className:"coments"},t.comment)),r.a.createElement("button",{onClick:function(){window.confirm("Are you sure of deleting (".concat(t.title,")"))&&function(e){return b.apply(this,arguments)}(t._id).then((function(){c(null),a(n.filter((function(e){return e._id!==t._id})))})).catch((function(e){a(n.filter((function(e){return e._id!==t._id}))),c(null),console.log(e)}))}},"Delete"))},A=function(e){var t=e.logEntries,a=e.setLogEntries,c=Object(n.useState)(null),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(!1),m=Object(u.a)(s,2),d=m[0],p=m[1],g=Object(n.useState)(null),E=Object(u.a)(g,2),f=E[0],h=E[1],b=Object(n.useCallback)((function(e){return i(e)}),[]);return r.a.createElement("div",{className:"account-page"},r.a.createElement("div",{className:"locations"},r.a.createElement("h4",null,"Locations"),r.a.createElement("ul",null,t?function(e){return e.map((function(e){return r.a.createElement("li",{key:e._id},e.title,r.a.createElement("button",{onClick:function(){return b(e)}},"Info")," ")}))}(t):null)),r.a.createElement("div",{className:"account-info"},r.a.createElement("div",{className:"entry-info"},o?r.a.createElement(C,{setFullScreenImg:h,entry:o,setEntryToShow:i,logEntries:t,setLogEntries:a,setShowFullScreenImg:p}):r.a.createElement("h4",null,"Select a location"))),r.a.createElement("div",{className:d?"full-screen-img-container":"show",onClick:function(){return p(!1)}},r.a.createElement("img",{width:"80%",height:"80%",src:f,alt:"prueba"})))},F=function(e){var t=e.isLogged,a=e.setIsLogged,c=Object(k.a)(),l=c.register,o=c.handleSubmit,d=Object(n.useState)(""),p=Object(u.a)(d,2),g=p[0],E=p[1],f=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),E("Here will be the error message");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"account-page"},t?r.a.createElement(m.a,{to:{pathname:"/"}}):r.a.createElement(m.a,{to:{pathname:"/login"}}),r.a.createElement("p",null,"Login Page"),r.a.createElement("div",{className:"loggin-container"},r.a.createElement("form",{onSubmit:o(f),className:"entry-form"},g?r.a.createElement("h3",{className:"error"},g):null,r.a.createElement("label",{htmlFor:"username"},"Username or Email"),r.a.createElement("input",{name:"username",required:!0,ref:l,id:"username"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",required:!0,ref:l,id:"password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Login with database"),r.a.createElement("button",{onClick:function(){return a(!0)}},"Login test")),r.a.createElement("button",null,"Register")))};var I=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(u.a)(l,2),d=o[0],p=o[1],E=Object(n.useState)(null),f=Object(u.a)(E,2),h=f[0],b=f[1],v=Object(n.useState)({width:"100%",height:"100%",latitude:18.5073011,longitude:-69.858715,zoom:10}),w=Object(u.a)(v,2),j=w[0],O=w[1];Object(n.useEffect)((function(){if(!d)return console.log("not logged"),void c([]);k()}),[d]);var k=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(y,{isLogged:d,setIsLogged:p}),r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(x,{viewport:j,getEntries:k,setAddEntryLocation:b,showAddMarkerPopUp:function(e){var t=Object(u.a)(e.lngLat,2),a=t[0],n=t[1];b({latitude:n,longitude:a})},setViewport:O,logEntries:a,addEntryLocation:h})),r.a.createElement(m.b,{exact:!0,path:"/login"},r.a.createElement(F,{isLogged:d,setIsLogged:p})),r.a.createElement(N,{exact:!0,path:"/account/",prueva:"prueva billy",isLogged:d,logEntries:a,component:A,setLogEntries:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,null,r.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.a736435c.chunk.js.map